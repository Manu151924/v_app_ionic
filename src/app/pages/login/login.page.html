<ion-content [fullscreen]="true" class="login-content">
  <div class="login-header">
    @if(showOtpField){
    <ion-button
      fill="clear"
      class="back-icon"
      (click)="handleBack()"
      (keydown.enter)="handleBack()"
      (keydown.space)="handleBack()"
      aria-label="Go back"
    >
      <ion-icon name="chevron-back"></ion-icon>
    </ion-button>
    }
    <img src="assets/icon/logo2.png" alt="Safexpress Logo" class="logo" />
  </div>
  <div class="main-container">
    <div class="login-card">
      <h2>Sign in to your account</h2>
      <ion-item lines="full" class="custom-item">
        <ion-input
          type="text"
          maxlength="10"
          inputmode="numeric"
          placeholder="Enter Mobile"
          [(ngModel)]="mobileNumber"
          (ionInput)="filterNumberInput($event, 'mobile')"
        >
        </ion-input>
      </ion-item>

      @if (showOtpField) {
      <ion-item lines="full" class="custom-item">
        <ion-input
          #otpInput
          type="password"
          maxlength="6"
          inputmode="numeric"
          placeholder="Enter OTP"
          [(ngModel)]="otp"
          (ionInput)="filterNumberInput($event, 'otp')"
        >
        </ion-input>
      </ion-item>

      } 
@if (!showOtpField) {
<button
  class="otp-link"
  type="button"
  (click)="sendOtp()"
  [disabled]="isSendingOtp"
>
  {{ isSendingOtp ? 'Sendingâ€¦' : 'Send OTP' }}
</button>
} @else {
      <div class="otp-actions">
        <a
          class="resend-otp"
          (click)="resendOtp()"
          [class.disabled]="resendDisabled || isResendingOtp"
        >
          {{ isResendingOtp ? 'Resending OTP' : 'Resend OTP' }}
        </a>

        <button
          class="submit-btn"
          [disabled]="isVerifyingOtp"
          (click)="login()"
        >
          {{ isVerifyingOtp ? 'Verifying OTP' : 'Submit' }}
        </button>
      </div>
      }
    </div>
  </div>

  <div class="footer">
    <span class="version">Version {{ version }}</span>
    <a class="tnc" (click)="openTerms()">T&C</a>
  </div>
</ion-content>
